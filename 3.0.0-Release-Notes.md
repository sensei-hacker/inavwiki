![](http://static.rcgroups.net/forums/attachments/6/1/0/3/7/6/a9088858-102-inav.png)

**Hello and welcome to INAV 3.0.0 Release!**

Please carefully read all of this document for the best possible experience and safety.

Get in touch with other pilots, share experiences, suggestions and ask for help on:

<table>
  <tbody>
    <tr>
      <td><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/82/Telegram_logo.svg/1024px-Telegram_logo.svg.png" width="48"></td>
      <td><a href="https://t.me/INAVFlight">INAV Official on Telegram</a></td>
    </tr>
    <tr>
      <td><img src="https://upload.wikimedia.org/wikipedia/commons/c/cd/Facebook_logo_%28square%29.png" width="48"></td>
      <td><a href="https://www.facebook.com/groups/INAVOfficial">INAV Official on Facebook</a></td>
    </tr>
  </tbody>
</table>

Please continue to support developers, for free, by checking out from the following stores after having clicked on the following links:

<table>
  <tbody>
    <tr>
      <td><img src="https://lh3.googleusercontent.com/TiHXyUiZ2COk7OmceBgo1qeRN2APAjWL5qUydGc-U3LqkJb3n13EhYEJ8Dpz_IACNHU" width="55"></td>
      <td><a href="https://inavflight.com/shop/u/bg">Support us on Banggood</a></td>
    </tr>
  </tbody>
</table>

Your contribution from the past month has been very welcome! Thanks!

Tested and suggested hardware can be found [here](https://github.com/iNavFlight/inav/wiki/Welcome-to-INAV,-useful-links-and-products) 

## Important Notes

### F3 Removal

STM32 F3 flight controllers like Omnibus F3 or SP Racing F3 are no longer supported in INAV. If you are still using F3 boards, please migrate to F4 or F7.

The supporting code will be retained for a few more releases, but will not be maintained and is not guarantee to build or work properly in future.

## Upgrading from 2.6, 2.6.1

0. Download and install the new [configurator](https://github.com/iNavFlight/inav-configurator/releases)
1. Save to a file the current _diff all_ from the CLI.
2. Upgrade to INAV 3.0 using the Full Erase option in the configurator.
3. Upload your OSD font of choice from the OSD tab.
4. Go the CLI again and paste the contents on the file you previously create and write _save_ , press ENTER and done!
5. You should be ready, explore new 3.0 features and enjoy!

## Upgrading from 2.5 or older version

Please follow the instructions on [this](https://github.com/iNavFlight/inav/wiki/Upgrading-from-an-older-version-of-INAV-to-the-current-version) page.
 
## New targets:

* Diatone MambaF405US_I2C
* Mamba F722_I2C 
* FLYWOOF411_V2 

## CLI:

### New commands

None (TBC).

### Changed Settings

| Setting | Description |
| ------- | ----------- |
| receiver_type | Default: target |
| blackbox_device | Default: target |
| platform_type | Default: MULTIROTOR |
| log_level | Default: ERROR |
| rssi_source | Default: AUTO |
| nav_overrides_motor_stop | When set to OFF the navigation system will not take over the control of the motor if the throttle is low (motor will stop). When set to OFF_ALWAYS the navigation system will not take over the control of the motor if the throttle was low even when failsafe is triggered. When set to AUTO_ONLY the navigation system will only take over the control of the throttle in autonomous navigation modes (NAV WP and NAV RTH). When set to ALL_NAV (default) the navigation system will take over the control of the motor completely and never allow the motor to stop even when the throttle is low. This setting only has an effect on NAV modes which take control of the throttle when combined with MOTOR_STOP and is likely to cause a stall if fw_min_throttle_down_pitch isn't set correctly or the pitch estimation is wrong for fixed wing models when not set to ALL_NAV |
| nav_rth_climb_first | New: `ON_FW_SPIRAL` |

### New Settings

| Setting | Description |
| ------- | ----------- |
| gyro_anti_aliasing_lpf_hz | Gyro processing anti-aliasing filter cutoff frequency. In normal operation this filter setting should never be changed. In Hz Values: 0 - 255 Default: 250 |
| gyro_anti_aliasing_lpf_type | Specifies the type of the software LPF of the gyro signals. Default: PT1 |
| gyro_main_lpf_hz | Software based gyro main lowpass filter. Value is cutoff frequency (Hz) Values: 0 - 500 Default: 60 |
| gyro_main_lpf_type | Defines the type of the main gyro LPF filter. Possible values: `PT1`, `BIQUAD`. `PT1` offers faster filter response while `BIQUAD` better attenuation. Default: BIQUAD |
| gyro_use_dyn_lpf | Use Dynamic LPF instead of static gyro stage1 LPF. Dynamic Gyro LPF updates gyro LPF based on the throttle position. Default: FALSE |
| gyro_dyn_lpf_min_hz | Minimum frequency of the gyro Dynamic LPF Values: 40 - 400 Default: 200 |
| gyro_dyn_lpf_max_hz | Maximum frequency of the gyro Dynamic LPF Values: 40 - 1000 Default: 500 |
| gyro_dyn_lpf_curve_expo | Expo value for the throttle-to-frequency mapping for Dynamic LPF Values: 1 - 10 Default: 5 |
| gyro_abg_alpha | Alpha factor for Gyro Alpha-Beta-Gamma filter Values: 0 - 1 Default: 0 |
| gyro_abg_boost | Boost factor for Gyro Alpha-Beta-Gamma filter Values: 0 - 2 Default: 0.35 |
| gyro_abg_half_life | Sample half-life for Gyro Alpha-Beta-Gamma filter Values: 0 - 10 Default: 0.5 |
| imu2_hardware | Selection of a Secondary IMU hardware type. NONE disables this functionality Default: NONE, values  `NONE`, `BNO055`, `BNO055_SERIAL` |
| imu2_use_for_osd_heading | If set to ON, Secondary IMU data will be used for Analog OSD heading Default: FALSE |
| imu2_use_for_osd_ahi | If set to ON, Secondary IMU data will be used for Analog OSD Artificial Horizon Default: FALSE |
| imu2_use_for_stabilized | If set to ON, Secondary IMU data will be used for Angle, Horizon and all other modes that control attitude (PosHold, WP, RTH) Default: FALSE |
| imu2_align_roll | Roll alignment for Secondary IMU. 1/10 of a degree Values: -1800 - 3600 Default: 0 |
| imu2_align_pitch | Pitch alignment for Secondary IMU. 1/10 of a degree Values: -1800 - 3600 Default: 0 |
| imu2_align_yaw | Yaw alignment for Secondary IMU. 1/10 of a degree Values: -1800 - 3600 Default: 0 |
| imu2_gain_acc_x | Secondary IMU ACC calibration data Values: -32768 - 32767 Default: 0 |
| imu2_gain_acc_y | Secondary IMU ACC calibration data Values: -32768 - 32767 Default: 0 |
| imu2_gain_acc_z | Secondary IMU ACC calibration data Values: -32768 - 32767 Default: 0 |
| imu2_gain_mag_x | Secondary IMU MAG calibration data Values: -32768 - 32767 Default: 0 |
| imu2_gain_mag_y | Secondary IMU MAG calibration data Values: -32768 - 32767 Default: 0 |
| imu2_gain_mag_z | Secondary IMU MAG calibration data Values: -32768 - 32767 Default: 0 |
| imu2_radius_acc | Secondary IMU MAG calibration data Values: -32768 - 32767 Default: 0 |
| imu2_radius_mag | Secondary IMU MAG calibration data Values: -32768 - 32767 Default: 0 |
| turtle_mode_power_factor | Turtle mode power factor Values: 0 - 100 Default: 55 |
| servo_autotrim_rotation_limit | Servo midpoints are only updated when total aircraft rotation is less than this threshold [deg/s]. Only applies when using `feature FW_AUTOTRIM`. Values: 1 - 60 Default: 15 |
| prearm_timeout | Duration (ms) for which Prearm being activated is valid. after this, Prearm needs to be reset. 0 means Prearm does not timeout. Values: 0 - 10000 Default: 10000 |
| airmode_type | Defines the Airmode state handling type. Default **STICK_CENTER** is the classical approach in which Airmode is always active if enabled, but when the throttle is low and ROLL/PITCH/YAW sticks are centered, Iterms is not allowed to grow (ANTI_WINDUP). **THROTTLE_THRESHOLD** is the Airmode behavior known from Betaflight. In this mode, Airmode is active as soon THROTTLE position is above `airmode_throttle_threshold` and stays active until disarm. ANTI_WINDUP is never triggered. For small Multirotors (up to 7-inch propellers) it is suggested to switch to **THROTTLE_THRESHOLD** since it keeps full stabilization no matter what pilot does with the sticks. Fixed Wings always use **STICK_CENTER_ONCE** or **STICK_CENTER** modes. Default: STICK_CENTER |
| airmode_throttle_threshold | Defines airmode THROTTLE activation threshold when `airmode_type` **THROTTLE_THRESHOLD** is used Values: 1000 - 2000 Default: 1300 |
| fw_d_pitch | Fixed wing rate stabilisation D-gain for PITCH Default: 0 |
| fw_d_roll | Fixed wing rate stabilisation D-gain for ROLL Default: 0 |
| fw_d_yaw | Fixed wing rate stabilisation D-gain for YAW Default: 0 |
| fw_yaw_iterm_freeze_bank_angle | Yaw Iterm is frozen when bank angle is above this threshold [degrees]. This solves the problem of the rudder counteracting turns by partially disabling yaw stabilization when making banked turns. Setting to 0 (the default) disables this feature. Only applies when autopilot is not active and TURN ASSIST is disabled. Values: 0 - 90 Default: 0 |
| fw_level_pitch_trim | Pitch trim for self-leveling flight modes. In degrees. +5 means airplane nose should be raised 5 deg from level Values: -10 - 10 Default: 0 |
| smith_predictor_strength | The strength factor of a Smith Predictor of PID measurement. In percents Values: 0 - 1 Default: 0.5 |
| smith_predictor_delay | Expected delay of the gyro signal. In milliseconds Values: 0 - 8 Default: 0 |
| smith_predictor_lpf_hz | Cutoff frequency for the Smith Predictor Low Pass Filter Values: 1 - 500 Default: 50 |
| nav_land_minalt_vspd | Vertical descent velocity under nav_land_slowdown_minalt during the RTH landing phase. [cm/s] Values: 50 - 500 Default: 50 |
| nav_land_maxalt_vspd | Vertical descent velocity above nav_land_slowdown_maxalt during the RTH landing phase. [cm/s] Values: 100 - 2000 Default: 200 |
| nav_rth_alt_control_override | If set to ON RTH altitude and CLIMB FIRST settings can be overridden during the RTH climb phase using full pitch or roll stick held for > 1 second. RTH altitude is reset to the current altitude using pitch down stick. RTH CLIMB FIRST is overridden using right roll stick so craft turns and heads directly to home (CLIMB FIRST override only works for fixed wing) Default: FALSE |
| nav_max_altitude | Max allowed altitude (above Home Point) that applies to all NAV modes (including Altitude Hold). 0 means limit is disabled Values: 0 - 65000 Default: 0 |
| safehome_max_distance | In order for a safehome to be used, it must be less than this distance (in cm) from the arming point. Values: 0 - 65000 Default: 20000 |
| safehome_usage_mode | Used to control when safehomes will be used. Possible values are `OFF`, `RTH` and `RTH_FS`.  See [Safehome documentation](Safehomes.md#Safehome) for more information. Default: RTH |
| nav_mc_wp_slowdown | When ON, NAV engine will slow down when switching to the next waypoint. This prioritizes turning over forward movement. When OFF, NAV engine will continue to the next waypoint and turn as it goes. Default: TRUE |
| mavlink_version | Version of MAVLink to use Values: 1 - 2 Default: 2 |
| osd_telemetry | To enable OSD telemetry for antenna tracker. Possible values are `OFF`, `ON` and `TEST` Default: OFF |
| osd_stats_min_voltage_unit | Display minimum voltage of the `BATTERY` or the average per `CELL` in the OSD stats. Default: BATTERY. Options  `BATTERY`, `CELL` |
| osd_plus_code_short | Number of leading digits removed from plus code. Removing 2, 4 and 6 digits requires a reference location within, respectively, ~800km, ~40 km and ~2km to recover the original coordinates. Default: 0 |
| osd_sidebar_height | Height of sidebars in rows. 0 leaves only the level indicator arrows (Not for pixel OSD) Values: 0 - 5 Default: 3 |
| osd_pan_servo_index | Index of the pan servo to adjust osd home heading direction based on camera pan. Note that this feature does not work with continiously rotating servos. Values: 0 - 10 Default: 0 |
| osd_pan_servo_pwm2centideg | Centidegrees of pan servo rotation us PWM signal. A servo with 180 degrees of rotation from 1000 to 2000 us PWM typically needs `18` for this setting. Change sign to inverse direction. Values: -36 - 36 Default: 0 |
| vtx_smartaudio_early_akk_workaround | Enable workaround for early AKK SAudio-enabled VTX bug. Default: TRUE |
| dji_speed_source | Sets the speed type displayed by the DJI OSD: GROUND, 3D, AIR Default: GROUND |
| dshot_beeper_enabled | Whether using DShot motors as beepers is enabled Default: TRUE |
| dshot_beeper_tone | Sets the DShot beeper tone Values: 1 - 5 Default: 1 |
### Removed settings

| Setting | Description |
| ------- | ----------- |
| gyro_sync |  |
| gyro_lpf_hz |  |
| gyro_lpf_type |  |
| gyro_stage2_lowpass_hz |  |
| gyro_stage2_lowpass_type |  |
| mc_airmode_type |  |
| mc_airmode_threshold |  |
| nav_landing_speed |  |

### Renamed settings

| Old name | New name |
| -------- | -------- |
| osd_artificial_horizon_reverse_roll | osd_ahi_reverse_roll |
| osd_artificial_horizon_max_pitch | osd_ahi_max_pitch |

## New drivers and protocols

* Rangefinder "GY-US42(v2) Ultrasonic Range Sensor
* Rangefinder vl53l1x
* BNO055 Secondary IMU 
* BMI088 IMU

## New features

### Turtle mode ([@kernel-machine])

### WP mission sealevel altitude datum  ([@breadoven])

Prior to inav 3.0, mission waypoint altitudes are relative the arming location. It is now possible to define waypoints with absolute (AMSL) altitude, making the mission independent of the arming location. See the [inav wiki](https://github.com/iNavFlight/inav/wiki/MSP-Navigation-Messages#waypoint-and-action-attributes) for details (WP `paramater3`)

### WP Mission Landing Elevation Setting ([@breadoven])

The relative / absolute ground altitude of a `LAND` waypoint may be set as WP `paramater3` (m). See the [inav wiki](https://github.com/iNavFlight/inav/wiki/MSP-Navigation-Messages#waypoint-and-action-attributes) for details.

### Do not slow down in WP mission when approaching a waypoint ([@DzikuVx])

### DShot Beeper  ([@harry1453])

### RC via MAVLink & MAVLink V2 Support ([@harry1453])

### Prearm Mode ([@harry1453])

### Initial cut on H7 MCU support ([@digitalentity])

### Add D-term to control loop on fixed wing aircraft ([@avsaase])

## Improvements and updates

### Gyro processing improvements ([@DzikuVx])

### Update EGNOS PRN mask to latest EGSA definition, fix SBAS for non-Galileo usage ([@stronnag])

The EGNOS (GPS ground assistance)  definitions have been updated to the latest values for all GNSS options. An invalid association with availability of Galileo has been corrected.

### Make CW270FLIP default MAG alignment ([@DzikuVx])

### Gyro processing improvements ([@DzikuVx])

### Add CRUISE mode which is equivalent to CRSH+AH ([@shellixyz])

### Add option to display min cell voltage instead of min pack voltage on the disarm screen ([@avsaase])

### Bump OSD font min version to 2 ([@shellixyz])

### OSD: display power >1000W in kW ([@avsaase])

### Copter: add new setting for final landing vspeed instead of being hardcoded to 25% of set landing vspeed ([@shellixyz])

### Drop gyro_sync ([@DzikuVx])

### Delayed safehome ([@tonyyng])

### Switched RTH Preset Altitude Override ([@breadoven])

### Renamed OSD SW and LEDLOW to OSD/LEDS OFF ([@MrD-RC])

### Fixed wing RTH Spiral Climb Option ([@breadoven])

### Increase loiter max radius to 300m ([@DzikuVx])

### Rename NAV CRUISE mode to NAV COURSE HOLD ([@shellixyz])

### Homogenize OSD AHI settings prefix ([@shellixyz])

### Do not slow down in WP mission when approaching a waypoint ([@DzikuVx])

### Separate D and CD/FF adjustments ([@avsaase])

### Configure speed source for DJI OSD  ([@DzikuVx])

### Pan servo home direction offset  ([@avsaase])

### Increased fw loiter radius default ([@MrD-RC])

### Ability to trim pitch angle for level flight ([@DzikuVx])

### vtx_smartaudio_early_akk_workaround option ([@RomanLut])

### Added option to output servos on PWM and SBUS ([@IVData]) 

### build: Use -Os for F7 targets with flash <= 512K ([@fiam])

### Option for local plus codes on osd ([@avsaase])
This adds the option to remove the first 2, 4, or 6 digits from the OSD plus code. Doing so requires a reference location (for example your current location when using Google Maps on your phone) within ~600, ~40, and ~2km, respectively. 

### Changed default settings for fixed wing throttle smoothing in navigation modes ([@Airwide])
Throttle smoothing in the navigation modes on fixed wing aircraft is now enabled by default. This results in smoother throttle management and more efficient cruising.

### Disable all F3 targets  ([@DzikuVx])

### FrSky Pixel OSD: Honor ahi_max_pitch when drawing the horizon line ([@fiam], [@shellixyz])

[@shellixyz]: https://github.com/shellixyz
[@digitalentity]: https://github.com/digitalentity 
[@DzikuVx]: https://github.com/DzikuVx
[@stronnag]: https://github.com/stronnag
[@nmaggioni]: https://github.com/nmaggioni
[@tonyyng]: https://github.com/tonyyng
[@breadoven]: https://github.com/breadoven
[@avsaase]: https://github.com/avsaase
[@harry1453]: https://github.com/harry1453
[@MrD-RC]: https://github.com/MrD-RC
[@RomanLut]: https://github.com/RomanLut
[@IVData]: https://github.com/IVData
[@fiam]: https://github.com/fiam
[@Airwide]: https://github.com/Airwide
[@kernel-machine]: https://github.com/kernel-machine