![INAV 6 Horizon Hawk](https://quadmeup.com/assets/inav_5_buzzard.png)

# Hello and welcome to INAV 6 "Horizon Hawk"

Please carefully read all of this document for the best possible experience and safety.

Get in touch with other pilots, share experiences, suggestions and ask for help on:

<table>
  <body>
<tr>
<td><img width="48" src="https://discord.com/assets/f9bb9c4af2b9c32a2c5ee0014661546d.png"></td>
<td><a href="https://discord.gg/peg2hhbYwN" target="_blank">INAV Discord Server</a></td>
</tr>
    <tr>
      <td><img src="https://upload.wikimedia.org/wikipedia/commons/c/cd/Facebook_logo_%28square%29.png" width="48"></td>
      <td><a href="https://www.facebook.com/groups/INAVOfficial">INAV Official on Facebook</a></td>
    </tr>
  </tbody>
</table>

Tested and suggested hardware can be found [here](https://github.com/iNavFlight/inav/wiki/Welcome-to-INAV,-useful-links-and-products)

# Important Notes


# Upgrading from a previous release

## Upgrading from INAV 5 and 5.1

0. Download and install the new [configurator](https://github.com/iNavFlight/inav-configurator/releases)
1. Save to a file the current _diff all_ from the CLI.
2. Upgrade to INAV 6 using the Full Erase option in the configurator.
3. Upload your OSD font of choice from the OSD tab.
4. Go to the CLI again and paste the above-described contents from the file you previously created and write _save_ , press ENTER.
5. There are a large number of new, changed, and removed settings. Check carefully that the settings are correct and fix any unrecognized or out-of-range items from the saved configuration.
6. You should be ready, explore new 5.0 features, and enjoy!

## Upgrading from older versions

Please follow the instructions on [this](https://github.com/iNavFlight/inav/wiki/Upgrading-from-an-older-version-of-INAV-to-the-current-version) page.

# Important changes

## **New AHRS (Attitude & Heading Reference System)**
-----------------------------
INAV 6.0 includes a complete rework of the AHRS for Attitude Estimation, to make sure INAV always knows it's correct attitude relative to the ground. This should once and for all fix the issue, known as "Horizon Drift" and makes any navigation mode as well as self-leveling modes like ANGLE fully reliable and allows much more precise GPS-Navigation. This affects Fixed Wing as well as Multirotor.

The best results are given if the craft is equipped with GPS and in the case of Multirotor also with a compass. But also for pure LOS Crafts that have no GPS on board, the AHI stability is noticeably improved in most situations. To work best with non-GPS Fixed Wings, the Reference Airspeed has to be set according the average cruise speed of the craft.

---------------------------
### Beta only: When Updating from INAV 5.1 or older, apply the following settings after loading back your previous DIFF (Any Fixed Wing or Copter):

set imu_acc_ignore_rate = 15
set imu_acc_ignore_slope = 10
set imu_dcm_kp = 2000
set imu_dcm_ki = 50
set imu_dcm_kp_mag = 2000
set imu_dcm_ki_mag = 50

**For Fixed Wing Craft with no GPS:**
set fw_reference_airspeed = _(set this in cm/s. Set this to airspeed at which PIDs were tuned. Usually should be set to cruise airspeed. Also used for coordinated turn calculation if airspeed sensor is not present.)_

If you notice any problems, please head to the Discussion Thread here and post your feedback, if possible with DVR and Blackbox log: https://github.com/iNavFlight/inav/discussions/8469

## HUD Offset change
The operation of `osd_horizon_offset` has been reversed, to make it more intuitive. If you have a non-zero value for `osd_horizon_offset` it will need to be inverted. For example `osd_horizon_offset = 1` would become `osd_horizon_offset = -1`. Positive values move the HUD up, and negative values move it down.

# New targets

# CLI

## Changed settings

Note: `nav_extra_arming_safety` The `OFF` option has been removed. `ON` and `ALLOW_BYPASS` are now the only valid options.


| Name | Values |
| ---- | ------ |
| acc_hardware | Removed:  `MPU6050` |
| debug_modes | Removed:  `GYRO`, `SBUS`, `FPORT`, `ERPM`, `RPM_FILTER`, `RPM_FREQ`, `DYNAMIC_FILTER`, `DYNAMIC_FILTER_FREQUENCY`, `IRLOCK`, `KALMAN_GAIN`, `PID_MEASUREMENT`, `SPM_CELLS`, `SPM_VS600`, `SPM_VARIO`, `IMU2`, `SMITH_PREDICTOR` |
| gps_provider | Removed:  `UNUSED`, `NAZA`, `MTK` |
| mag_hardware | Removed:  `GPSMAG` |
| nav_extra_arming_safety | Removed:  `OFF` |
| osd_video_system | New:  `HDZERO`, `DJIWTF` |
| receiver_type | Removed:  `SPI` |
| serial_rx | Removed:  `SUMH`, `XB-B`, `XB-B-RJ01` |

## New Items

| Name | Description |
| ---- | ------ |
| dynamic_gyro_notch_3d_q | Q factor for 3D dynamic notches Values: 1 - 1000 Default: 200 |
| dynamic_gyro_notch_mode | Gyro dynamic notch type Default: 2D |
| failsafe_mission_delay | Applies if failsafe occurs when a WP mission is in progress. Sets the time delay in seconds between failsafe occurring and the selected failsafe procedure activating. If set to -1 the failsafe procedure won't activate at all and the mission will continue until the end. Values: -1 - 600 Default: 0 |
| imu_gps_yaw_windcomp | Wind compensation in heading estimation from gps groundcourse(fixed wing only) Default: TRUE |
| imu_inertia_comp_method | Inertia force compensation method when gps is avaliable, VELNED use the accleration from gps, TURNRATE calculates accleration by turnrate multiplied by speed, ADAPTIVE choose best result from two in each ahrs loop Default: VELNED |
| nav_auto_disarm_delay | Delay before craft disarms when `nav_disarm_on_landing` is set (ms) Values: 100 - 10000 Default: 2000 |
| nav_fw_launch_manual_throttle | Allows launch with manually controlled throttle. INAV only levels wings and controls climb pitch during launch. Throttle is controlled directly by throttle stick movement. IF USED WITHOUT A GPS LOCK plane must be launched immediately after throttle is increased to avoid issues with climb out stabilisation and the launch ending sooner than expected (launch end timer starts as soon as the throttle stick is raised). Default: FALSE |
| nav_fw_wp_tracking_accuracy | Waypoint tracking accuracy forces the craft to quickly head toward and track along the waypoint course line as closely as possible. Settings 1 to 10 adjust the course tracking response. Higher values dampen the response reducing possible overshoot. A value of 5 is a good starting point. Set to 0 to disable. Values: 0 - 10 Default: 0 |
| nav_fw_wp_tracking_max_angle | Sets the maximum allowed alignment convergence angle to the waypoint course line when nav_fw_wp_tracking_accuracy is active [degrees]. Lower values result in smoother alignment with the course line but will take more distance until this is achieved. Values: 30 - 80 Default: 60 |
| nav_fw_wp_turn_smoothing | Smooths turns during WP missions by switching to a loiter turn at waypoints. When set to ON the craft will reach the waypoint during the turn. When set to ON-CUT the craft will turn inside the waypoint without actually reaching it (cuts the corner). Default: OFF |
| nav_land_detect_sensitivity | Changes sensitivity of landing detection. Higher values increase speed of detection but also increase risk of false detection. Default value should work in most cases. Values: 1 - 15 Default: 5 |
| nav_rth_trackback_distance | Maximum distance allowed for RTH trackback. Normal RTH is executed once this distance is exceeded [m]. Values: 50 - 2000 Default: 500 |
| nav_rth_trackback_mode | Useage modes for RTH Trackback. OFF = disabled, ON = Normal and Failsafe RTH, FS = Failsafe RTH only. Default: OFF |
| rc_filter_auto | When enabled, INAV will set RC filtering based on refresh rate and smoothing factor. Default: FALSE |
| rc_filter_lpf_hz | RC data biquad filter cutoff frequency. Lower cutoff frequencies result in smoother response at expense of command control delay. Practical values are 20-50. Set to zero to disable entirely and use unsmoothed RC stick values Values: 15 - 250 Default: 50 |
| rc_filter_smoothing_factor | The RC filter smoothing factor. The higher the value, the more smoothing but also the more delay in response. Value 1 sets the filter at half the refresh rate. Value 100 sets the filter to aprox. 10% of the RC refresh rate Values: 1 - 100 Default: 30 |

## Removed Items

| Name | Description |
| ---- | ------ |
| baro_median_filter | |
| eleres_freq |  |
| eleres_loc_delay |  |
| eleres_loc_en |  |
| eleres_loc_power |  |
| eleres_signature |  |
| eleres_telemetry_en |  |
| eleres_telemetry_power |  |
| failsafe_mission | see new `failsafe_mission_delay` |
| imu2_align_pitch | |
| imu2_align_roll |  |
| imu2_align_yaw |  |
| imu2_gain_acc_x |  |
| imu2_gain_acc_y |  |
| imu2_gain_acc_z |  |
| imu2_gain_mag_x |  |
| imu2_gain_mag_y |  |
| imu2_gain_mag_z |  |
| imu2_hardware |  |
| imu2_radius_acc |  |
| imu2_radius_mag |  |
| imu2_use_for_osd_ahi |  |
| imu2_use_for_osd_heading |  |
| imu2_use_for_stabilized |  |
| nav_fw_auto_disarm_delay | See generic `nav_auto_disarm_delay` |
| nav_mc_auto_disarm_delay | See generic `nav_auto_disarm_delay` |
| rc_filter_frequency |  |
| rx_spi_id |  |
| rx_spi_protocol |  |
| rx_spi_rf_channel_count |  |

# Changelist


The full list of changes is available [here](https://github.com/iNavFlight/inav/pulls?q=is%3Apr+milestone%3A6.0+is%3Aclosed)
The full list of INAV Configurator changes is available [here](https://github.com/iNavFlight/inav-configurator/pulls?q=is%3Apr+milestone%3A6.0+is%3Aclosed)
