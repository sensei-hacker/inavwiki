![](http://static.rcgroups.net/forums/attachments/6/1/0/3/7/6/a9088858-102-inav.png)

**Hello and welcome to INAV 2.6.0 Release!**

Please carefully read all of this document for the best possible experience and safety.

Get in touch with other pilots, share experiences, suggestions and ask for help on:

<table>
  <tbody>
    <tr>
      <td><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/82/Telegram_logo.svg/1024px-Telegram_logo.svg.png" width="48"></td>
      <td><a href="https://t.me/INAVFlight">INAV Official on Telegram</a></td>
    </tr>
    <tr>
      <td><img src="https://upload.wikimedia.org/wikipedia/commons/c/cd/Facebook_logo_%28square%29.png" width="48"></td>
      <td><a href="https://www.facebook.com/groups/INAVOfficial">INAV Official on Facebook</a></td>
    </tr>
  </tbody>
</table>

Please continue to support developers, for free, by checking out from the following stores after having clicked on the following links:

<table>
  <tbody>
    <tr>
      <td><img src="https://lh3.googleusercontent.com/TiHXyUiZ2COk7OmceBgo1qeRN2APAjWL5qUydGc-U3LqkJb3n13EhYEJ8Dpz_IACNHU" width="55"></td>
      <td><a href="https://inavflight.com/shop/u/bg">Support us on Banggood</a></td>
    </tr>
  </tbody>
</table>

Your contribution from the past month has been very welcome! Thanks!

Tested and suggested hardware can be found [here](https://github.com/iNavFlight/inav/wiki/Welcome-to-INAV,-useful-links-and-products) 

## Important Notes

**Compass has to be recalibrated**. Do not import from previous INAV releases

**Do not migrate Multirotor PID and filter settings** from previous releases of INAV. Use Multirotor default preset (3"-7") instead and make required changes on top of that

### F3 Deprecation

STM32 F3 flight controllers like Omnibus F3 or SP Racing F3 are deprecated and soon they will reach the end of support in INAV. If you are still using F3 boards, please migrate to F4 or F7.

## Safehome replaces RTH offset distance and direction

A new feature `safehome` (see [below](#safehome-tonyyng)) replaces `nav_rth_home_offset_distance` and `nav_rth_home_offset_direction`, offering a safer and much more flexible function. If you were using the `nav_rth_home_offset_*` settings, please migrate to `safehome`as these settings are removed.

## Upgrading from 2.5

0. Download and install the new [configurator](https://github.com/iNavFlight/inav-configurator/releases)
1. Save to a file the current _diff all_ from the CLI.
2. Upgrade to INAV 2.5 using the Full Erase option in the configurator.
3. Upload your OSD font of choice from the OSD tab.
4. Go the CLI again and paste the contents on the file you previously create and write _save_ , press ENTER and done!
5. You should be ready, explore new 2.6 features and enjoy!

## Upgrading from 2.4 or older version

Please follow the instructions on [this](https://github.com/iNavFlight/inav/wiki/Upgrading-from-an-older-version-of-INAV-to-the-current-version) page.
 
## New targets:

* IFLIGHTF4_SUCCEXD ([@digitalentity])

## CLI:

### New commands

| Command | Description |
| ------- | ----------- |
|  `safehome` | List of home locations, see [Safehomes.md](https://github.com/iNavFlight/inav/blob/master/docs/Safehomes.md) and [summary](#safehome-tonyyng)  |

### Changed Settings

| Setting | Description |
| ------- | ----------- |
| `mag_hardware` | New option added `MSP`|
| `baro_hardware` | New options added `DPS310` and `MSP` |
| `pitot_hardware` | New options added `MSP`|
| `serialrx_provider` | New options added `FPORT2` and `SRXL2` |
| `gps_provider` | New options added `MSP` |
| `debug_mode` | New options added `CD`, `KALMAN_GAIN`, `PID_MEASUREMENT`, `SPM_CELLS`, `SPM_VS600`, `SPM_VARIO`, `PCF8574` |
| `airmode_type` | New option added `STICK_CENTER_ONCE` |


### New Settings

| Setting | Description |
| ------- | ----------- |
| `osd_crsf_lq_format` | Values `TYPE1` or `TYPE2` affecting OSD display of CRSF LQ |
| `dji_esc_temp_source` | Values `ESC`, `IMU`, `BARO` |
| `dji_workarounds` | Values 'OFF', 'ON' |
| `dji_use_name_for_messages` | Values 'OFF', 'ON' |
| `nav_overrides_motor_stop` | Values `OFF`, `AUTO_ONLY`, `ALL_NAV` |
| `gyro_notch_hz` | Replaces `gyro_notch1_hz` and `gyro_notch2_hz` |
| `gyro_notch_cutoff` | Replaces `gyro_notch1_cutoff` and `gyro_notch2_cutoff` |
| `maggain_x`, `maggain_y`, `maggain_z` | Calibrated values replacing fixed values **Compass re-calibration is required** |
| `srxl2_unit_id` | Values 0 - 15, default 1 | 
| `srxl2_baud_fast` | Values `OFF`, `ON`, default `ON` |
| `mc_cd_pitch` | Multicopter Control Derivative gain for PITCH, values 0 - 200, default 60 |
| `mc_cd_roll` | Multicopter Control Derivative gain for ROLL, values 0 - 200, default 60 |
| `mc_cd_yaw` | Multicopter Control Derivative gain for YAW, values 0 - 200, default 60 |
| `fw_turn_assist_pitch_gain` | Gain required to keep constant pitch angle during coordinated turns (in TURN_ASSIST mode). Value significantly different from 1.0 indicates a problem with the airspeed calibration (if present) or value of `fw_reference_airspeed` parameter. Values 0 - 2, default 1 |
| nav_mc_vel_xy_dterm_attenuation | Maximum D-term attenution percentage for horizontal velocity PID controller (Multirotor). It allows to smooth the PosHold CRUISE, WP and RTH when Multirotor is traveling at full speed. Dterm is not attenuated at low speeds, breaking and accelerating. Values 0 - 100, default 90 |
| nav_mc_vel_xy_dterm_attenuation_start | A point (in percent of both target and current horizontal velocity) where nav_mc_vel_xy_dterm_attenuation begin. Values 0 - 100, default 10 |
| nav_mc_vel_xy_dterm_attenuation_end | A point (in percent of both target and current horizontal velocity) where nav_mc_vel_xy_dterm_attenuation reaches maximum. Values 0-100, default 60 |

### Removed settings

| Setting | Description |
| ------- | ----------- |
| `nav_rth_home_offset_distance` | Replaced by `safehome` | 
| `nav_rth_home_offset_direction` | Replaced by `safehome` |
| `gyro_notch1_hz` and `gyro_notch2_hz` | Replaced by `gyro_notch_hz` |
| `gyro_notch1_cutoff` and `gyro_notch2_cutoff` | Replaced by `gyro_notch_cutoff` |
| `use_dterm_fir_filter` |  |
| `dterm_setpoint_weight` |  |
| `dterm_notch_hz` | |
| `dterm_notch_cutoff` | |
| `mc_iterm_relax_type` | | 

## New drivers and protocols

* DPS310 barometer ([@digitalentity])

## New waypoint types support: SET_HEAD and SET_POI ([@stronnag])

The `SET_POI` WP type defines a location for a point of interest (POI). The craft will fly the mission (until a SET_HEAD) with the nose pointing at the POI, which might be useful for aerial photography. Note that the craft does NOT fly to the POI. [Wiki description and example](https://github.com/iNavFlight/inav/wiki/MSP-Navigation-Messages#set-poi-multirotor-only-multiwii-inav-26-and-later).

The `SET_HEAD` type sets the craft's heading (where it 'looks', not the direction of travel). This may be useful for useful for aerial photography. A value of `-1` causing the heading to be 'straight ahead', i.e. the direction of travel. Thus, `SET_POI` `-1` may used to cancel a previous valid `SET_HEAD` or `SET_POI`. A `SET_HEAD` remains in force until cancelled by `SET_HEAD` with `p1` of `-1`, or modified by a subsequent `SET_HEAD` or `SET_POI`. [Wiki description and example](https://github.com/iNavFlight/inav/wiki/MSP-Navigation-Messages#set_head-multirotor-only-multiwii-inav-26-and-later).

For now, this new waypoint types works only for multirotors, as this type of aircraft can fly "looking" to a different direction than it's flying. Different of an airplane, which can only fly forward and thus can only look forward when flying.

## Safehome ([@tonyyng])

Safehome replaces the `nav_rth_home_offset_*` settings, and allows the pilot to define up to 8 alternative home locations as absolute positions (lat, lon as decimal degress * 10,000,000). If a `safehome` is within 200m of the arming point, it will be used as the home location for RTH etc. Please see the separate document [Safehomes.md](https://github.com/iNavFlight/inav/blob/master/docs/Safehomes.md).

## Improvements to RTH/WP handling ([@digitalentity]).

WP mode activation with no mission loaded previously kept the current flight mode which may be counter-intuitive to the pilot. OSD will show that the mode is kept, however WP missions are generally not FPV. This PR creates a fallback in such case and will execute RTH instead which is safer than let the drone drift away. Also fixes a bug when RTH procedure may get interrupted in case of a brief sensor loss and switch out to ANGLE, ACRO or MANUAL instead of EMERGENCY. On airplanes with a certain RTH settings a brief GPS loss is tolerated in the navigation state machine, while the RTH activation bug would still bail out. This PR fixes this by making RTH procedure sticky, similar to other navigation flight modes.

## cmake Development environment ([@fiam])

inav 2.6 updates the build environment to use `cmake` as the build management tool. The developer build documentation has been updated for all platforms (MacOS, Linux, Windows, FreeBSD). Please see the [platform specific documentation](https://github.com/iNavFlight/inav/tree/master/docs/development).

## Small improvements

* **New Azimuth OSD element** ([@danarrib]) - Shows the direction of the aircraft from home. It's useful to keep the aircraft flying on the correct path in front of a high gain directional antenna.
* **Automatic CLI documentation** ([@nmaggioni]) - Now the [CLI.md](https://github.com/iNavFlight/inav/blob/master/docs/Cli.md) document is auto-generated based on actual source code. It means that now this documentation is much more accurate and always updated.
* **Removed "AIR" flight mode on the OSD** ([@MrD-RC]) - Airmode is not a flight mode itself, it's just ACRO.

## Main features
* [SRXL2 RX protocol](https://github.com/iNavFlight/inav/pull/5791)
* [Improved compass calibration](https://github.com/iNavFlight/inav/pull/4446)
* [Smoother autonomous flight on Multirotors: CRUISE, WP, RTH](https://github.com/iNavFlight/inav/pull/5338)
* [Allow Multirotor baro-less operations](https://github.com/iNavFlight/inav/pull/5880)
* [SET_HEAD and SET_POI WP types](https://github.com/iNavFlight/inav/pull/5851)
* [Removed gyro notch 2](https://github.com/iNavFlight/inav/pull/5736)
* [Multirotor Control Derivative - an equivalent of Betaflight FeedForward - Dterm is always computed from measurement](https://github.com/iNavFlight/inav/pull/5642)
* [Gyro Kalman Filter aka Unicorn Filter](https://github.com/iNavFlight/inav/pull/5519)
* [Safehomes](https://github.com/iNavFlight/inav/pull/5995)
* [F.port2](https://github.com/iNavFlight/inav/pull/5976)
* [Global Functions and Logic Conditions unification](https://github.com/iNavFlight/inav/pull/5971)
* [IO expander based on PCF8574 support](https://github.com/iNavFlight/inav/pull/5959) see [here for details](https://github.com/iNavFlight/hardware/tree/master/IO%20Expander)
* [Change OSD layout with Logic Conditions](https://github.com/iNavFlight/inav/pull/5934)
* [Logic Conditions sin, cos, tan and range scaling](https://github.com/iNavFlight/inav/pull/6108)
* [Improved airplane airmode handling](https://github.com/iNavFlight/inav/pull/6076)
* [OneShot125 is now a default ESC protocol](https://github.com/iNavFlight/inav/pull/6029)
* [Iterm Relax simplification](https://github.com/iNavFlight/inav/pull/6006)
* Improved OSD CMS [PID mechanics](https://github.com/iNavFlight/inav/pull/6193) [filters](https://github.com/iNavFlight/inav/pull/6174)
* Improved Crossfire support: SNR, LQ and alarms
* [Blackbox is not allowed to log faster than 1kHz](https://github.com/iNavFlight/inav/pull/6127) 

[@shellixyz]: https://github.com/shellixyz
[@digitalentity]: https://github.com/digitalentity 
[@DzikuVx]: https://github.com/DzikuVx
[@fiam]: https://github.com/fiam
[@giacomo892]: https://github.com/giacomo892
[@hali9]: https://github.com/hali9
[@stronnag]: https://github.com/stronnag
[@hydra]: https://github.com/hydra
[@OlivierC-FR]: https://github.com/OlivierC-FR
[@Jacky2k]: https://github.com/Jacky2k
[@gereic]: https://github.com/gereic
[@danarrib]: https://github.com/danarrib
[@nmaggioni]: https://github.com/nmaggioni
[@MrD-RC]: https://github.com/MrD-RC
[@tonyyng]: https://github.com/tonyyng